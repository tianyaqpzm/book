language: node_js
node_js: stable
cache:
  apt: true
  directories:
  - node_modules
before_install:
- export TZ='Asia/Shanghai'
- npm install -g hexo-cli
install:
- npm install
script:
- hexo clean && hexo g
after_script:
- set -ev
- git clone https://${GH_REF} blog
- cd blog
- git checkout master
- git config user.name "tianyaqpzm"
- git config user.email "tianyaqpzm@163.com"
- cd ../
- mv ./blog/.git/ ./public/
- cd ./public
- git add .
- git commit -m "Travis CI Auto Builder at `date +"%Y-%m-%d %H:%M"`"
- git push --force --quiet "https://${Travis_Token}@${GH_REF}" master
branches:
  only:
  - hexo
env:
  global:
  - GH_REF: github.com/tianyaqpzm/tianyaqpzm.github.io.git
  - secure: Np5DBYQckCN7tkTjK1eGX3hNoBwFPYe9TepQSUoeS1jQbckF7j7HwCF16wwbzVz1oUqOaf9BW8CU9roaQ51rXRac8NyKqTLj7y8607pT9mdFUX0aow9TrRQuWBvUDJr2cOIqa/8+XhuTNsY2HKbPesckNb/4dFBkPmWWhPlosHtKWrFseDgsPwgNJ9zVZYO0/KKrGR0vZvKhiJFlvvBbmkJNI0EP355ZS/PYU3HhXGiWaMegsF7CCscdekxbeNfcui5XRo8Y2H7DqWpAQg+7KAlE+GlUgZcgzQ49e/uSGvRDAHDVZ0i0dRAg8AKgDwPf+nTXxTgACrgEkc42LWQ8ojFdfjJqNloNy+cfLnGvfNp6eTN/+CQE0pMVIZLbUlp9h0lc5l1OZybLUpboYzveVGMEQTJFKoAscKaqXwU57p11247ueSyYeZycKkYA+cIjoOZyWgsn6/HnC4kjWh7ZSVKny1DxKGCNo7LYUEGmDrVK5RDN9Z/XeHD2KysKxgeBFgNMlwL2c8qotrMC9xNPelVOX0uAZlgRpaezWO0prUPxzC+gLi1tEClJNjGkt8isUiVvUONBK/ldhup79ZE02GXYg3pzVYww2yUWPJSwwji9vYhD7wNqb1G3lFN7arctRlsetQA36I+6IEWZWiUO3GlO/C56fwt8k7xeaRl4TUU=
