language: node_js
node_js: stable
cache:
  apt: true
  directories:
  - node_modules
before_install:
- export TZ='Asia/Shanghai'
- npm install -g hexo-cli
install:
- npm install
script:
- hexo clean && hexo g
after_script:
- set -ev
- git clone https://${GH_REF} blog
- cd blog
- git checkout master
- git config user.name "tianyaqpzm"
- git config user.email "tianyaqpzm@163.com"
- cd ../
- mv ./blog/.git/ ./public/
- cd ./public
- git add .
- git commit -m "Travis CI Auto Builder at `date +"%Y-%m-%d %H:%M"`"
- git push --force --quiet "https://${Travis_Token}@${GH_REF}" master
branches:
  only:
  - hexo
env:
  global:
  - GH_REF: github.com/tianyaqpzm/tianyaqpzm.github.io.git
  - secure: oCjcblQw6qCPaEbBwBk8dcc2vAeFrH1bsrOgT4MHCykuzk/fDhfjTEtSjqGZutVvQaFdr33v1WJMroI5RfiEG7HlgIu/2l8oIgvgMs5+RIPNtczWLOi34dOGGWF7L8ZXjsFvjUhtj+qRYjurtlYyFCQgluV7p2HfjIJ97yq+FWZdnGFvedw/uFsBSbm/C2gi9s4kjkWO7q2SSFZ+F/VYLZeiaNNjXnR70AhKao8bZ45gdS0DOKr/xzRBd3OED45JrFe2kVPJQFO8yjwyu5Bte0dAnT8fECoNASq9H1RorsUwKvRyHyQsDnRCdaX6vzGM8N5m/QndfDckpwCLgcXwBiszqr2ChdXlndF58upXjeblvQn0vK0bSV5DcsHrqJnUqtiPlVD7W1Pq/rdFni1vrMb9zfAqUhqc7ptRO4MO8OiEeHR03msaCL+tuDAM8vmFMIm+4TjCRpQFrvAcRrcVryQuVVn+YzeHk7tHSK4v6e+9DP4yx+eAIs5pRA+0rCUqaOvHjGnyrtOCI+CvRRpBmmhy4cmczwwtZ9tZ594SxO1RwLmpzY5YbLN3xJbXeOnPNnSKifWhPNjiX6OZOMhNYl9nYiC91836zmJzEpQJcd0vRRbEXVlFt2uDJN7/lW0KR9jdPhWgCtJHJUWuQoZHkVksRl+Mq/MjTt65vqo09SU=
